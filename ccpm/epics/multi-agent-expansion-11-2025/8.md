---
name: Implement GitHub API Rate Limit Coordination
status: open
created: 2025-11-04T04:19:31Z
updated: 2025-11-04T04:24:55Z
github: https://github.com/foozlevazquez/ccpm/issues/8
depends_on: [2, 3]
parallel: true
conflicts_with: []
---

# Task: Implement GitHub API Rate Limit Coordination

## Description
Create a shared rate limit tracking system to prevent multiple agents from exceeding GitHub API limits. Track remaining requests and coordinate API calls across agents.

## Acceptance Criteria
- [ ] Rate limit tracking file at `.claude/locks/github-rate-limit.json`
- [ ] Rate limit check before GitHub operations
- [ ] Automatic backoff when approaching limits
- [ ] Rate limit refresh on reset time
- [ ] Integration with gh CLI rate limit endpoint
- [ ] Warning messages when limits low
- [ ] Lock-based coordination for API calls

## Technical Details
- Rate limit file format:
  ```json
  {
    "remaining": 4500,
    "limit": 5000,
    "reset": "2025-11-04T05:00:00Z",
    "last_updated": "2025-11-04T04:19:31Z"
  }
  ```
- Functions needed:
  - `check_rate_limit()` - returns remaining requests
  - `update_rate_limit()` - fetch from GitHub and update
  - `wait_for_rate_limit()` - sleep until reset if exhausted
  - `reserve_api_calls(count)` - atomically decrement
- Update commands that use GitHub API:
  - `epic-sync.md`
  - `issue-sync.md`
  - `import.md`
- Fetch limit from: `gh api rate_limit`
- Apply backoff when remaining < 100

## Files Affected
- `ccpm/scripts/lib/github-rate-limit.sh` (new)
- `ccpm/commands/pm/epic-sync.md` (modify)
- `ccpm/commands/pm/issue-sync.md` (modify)
- `.claude/locks/github-rate-limit.json` (new)

## Dependencies
- [ ] Task 001 (file locking)
- [ ] Task 002 (atomic operations)

## Effort Estimate
- Size: M
- Hours: 4-6
- Parallel: true

## Definition of Done
- [ ] Rate limit tracking implemented
- [ ] API calls coordinated across agents
- [ ] Backoff logic tested
- [ ] Integration with gh CLI verified
- [ ] Documentation added
