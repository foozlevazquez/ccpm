---
name: Add Monitoring and Debug Commands
status: open
created: 2025-11-04T04:19:31Z
updated: 2025-11-04T04:24:55Z
github: https://github.com/foozlevazquez/ccpm/issues/10
depends_on: [2, 6]
parallel: true
conflicts_with: []
---

# Task: Add Monitoring and Debug Commands

## Description
Create observability commands to monitor multi-agent activity, detect deadlocks, view lock status, and troubleshoot coordination issues.

## Acceptance Criteria
- [ ] `/pm:locks` - View all active locks
- [ ] `/pm:agents` - View active agents and their status
- [ ] `/pm:conflicts` - Detect and report file conflicts
- [ ] `/pm:deadlock-check` - Detect potential deadlocks
- [ ] Metrics logging for lock contention
- [ ] Agent activity timeline view
- [ ] Lock acquisition time tracking

## Technical Details
- Commands to implement:
  - `locks.md` - List all locks with age and owner
  - `agents.md` - Show agent registry (already started in task 005)
  - `conflicts.md` - Check for file ownership conflicts
  - `deadlock-check.md` - Analyze lock dependencies
- Metrics to track:
  - Lock wait time
  - Lock hold duration
  - Agent uptime
  - Commits per agent
  - API calls per agent
- Output formats:
  - Table view for locks/agents
  - Timeline for agent activity
  - Graph for lock dependencies
- Add logging to locking library

## Files Affected
- `ccpm/commands/pm/locks.md` (new)
- `ccpm/commands/pm/conflicts.md` (new)
- `ccpm/commands/pm/deadlock-check.md` (new)
- `ccpm/scripts/pm/locks.sh` (new)
- `ccpm/scripts/pm/conflicts.sh` (new)
- `ccpm/scripts/pm/deadlock-check.sh` (new)
- `ccpm/scripts/lib/locking.sh` (add logging)

## Dependencies
- [ ] Task 001 (file locking)
- [ ] Task 005 (agent registry)

## Effort Estimate
- Size: M
- Hours: 5-7
- Parallel: true

## Definition of Done
- [ ] All commands implemented
- [ ] Clear, actionable output
- [ ] Deadlock detection working
- [ ] Metrics collection tested
- [ ] Documentation added
- [ ] Troubleshooting guide created
